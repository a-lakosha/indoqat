<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <template id="inherit_page_jobs" inherit_id="website_hr_recruitment.index">
        <xpath expr="//t[@t-call='website.layout']" position="replace">
            <t t-call="website.layout">
                <section id="home_job">
                    <form action="">
                        <div class="container py-5 my-lg-4">
                            <div class="content py-4">
                                <h3 class="fw-bold pb-2">Find Jobs</h3>
                                <p>
                                    <t t-esc="len(jobs)"/>
                                    Positions
                                </p>
                            </div>
                            <div
                                    style="
                  border-top: 1px solid #d1d5db;
                  border-bottom: 1px solid #d1d5db;
                "
                                    class="row py-4 filters_jobs align-items-center"
                            >
                                <div class="col-lg-3">
                                    <form
                                            id="jobsForm"
                                            method="get"
                                            class="o_searchbar_form w-fit s_searchbar_input me-auto w-100 flex-grow-1"
                                    >
                                        <label for="search" class="pb-3">search</label>
                                        <div role="search" class="input-group w-100">
                                            <input
                                                    id="unput_jebs_search"
                                                    type="search"
                                                    name="search"
                                                    style="
                          padding: 16px 20px;
                          border: 1px solid #e5e7eb !important;
                        "
                                                    class="search-query rounded-5 bg-white w-100 form-control oe_search_box border-0 text-bg-light"
                                                    placeholder="Job title or keyword"
                                                    t-att-value="search"
                                                    autocomplete="off"
                                            />
                                        </div>
                                        <input
                                                name="order"
                                                type="hidden"
                                                class="o_search_order_by rounded-5"
                                                t-att-value="order_by if order_by else 'name asc'"
                                        />
                                    </form>
                                </div>
                                <!--  -->
                                <div
                                        t-attf-class="mt-3 mt-lg-0 col-lg-4 dropdown w-100 w-md-auto me-2 my-1 flex-fill"
                                >
                                    <label class="pb-3 d-block">City</label>

                                    <button
                                            style="border: 1px solid #e5e7eb !important"
                                            type="button"
                                            class="btn btn-outline-primary text-dark w-100"
                                            data-bs-toggle="dropdown"
                                            id="countriesDropdown"
                                    >
                                        <div
                                                class="d-flex justify-content-between align-items-center"
                                        >
                                            <div>
                                                <t t-if="country_id" t-out="country_id.name"/>
                                                <t t-elif="is_remote">Remote</t>
                                                <t t-else="">All Countries</t>
                                            </div>

                                            <svg
                                                    width="24"
                                                    height="24"
                                                    viewBox="0 0 24 24"
                                                    fill="none"
                                                    xmlns="http://www.w3.org/2000/svg"
                                            >
                                                <path
                                                        d="M19 9L12 16L5 9"
                                                        stroke="#0A0A0A"
                                                        stroke-width="2"
                                                        stroke-linecap="round"
                                                        stroke-linejoin="round"
                                                />
                                            </svg>
                                        </div>
                                    </button>
                                    <div
                                            class="dropdown-menu w-100 w-md-auto"
                                            aria-labelledby="countriesDropdown"
                                    >
                                        <a
                                                t-attf-href="/jobs?all_countries=1#{non_country_params}"
                                                t-attf-class="dropdown-item d-flex align-items-center justify-content-between nav-link#{'' if country_id or is_remote else ' active'}"
                                        >
                                            All Countries
                                            <span
                                                    t-attf-class="badge rounded-pill#{' bg-primary' if country_id or is_remote else ' bg-light text-primary'} ms-2 px-2"
                                                    t-out="count_per_country.get('all', '0')"
                                            />
                                        </a>
                                        <t t-foreach="countries" t-as="country">
                                            <t t-if="country">
                                                <a
                                                        t-attf-href="/jobs?country_id=#{country.id}#{non_country_params}"
                                                        t-attf-class="dropdown-item d-flex align-items-center justify-content-between nav-link #{' active' if country_id and country_id.id == country.id else ''}"
                                                >
                                                    <t t-out="country.name"/>
                                                    <span
                                                            t-attf-class="badge rounded-pill#{' bg-light text-primary' if country_id and country_id.id == country.id else ' bg-primary'} ms-2 px-2"
                                                            t-out="count_per_country.get(country, '0')"
                                                    />
                                                </a>
                                            </t>
                                            <t t-else="">
                                                <a
                                                        t-attf-href="/jobs?is_remote=1#{current_department_param}#{current_employment_type_param}"
                                                        t-attf-class="dropdown-item d-flex align-items-center justify-content-between nav-link#{' active' if is_remote else ''}"
                                                >
                                                    Remote
                                                    <span
                                                            t-attf-class="badge rounded-pill#{' bg-light text-primary' if is_remote else ' bg-primary'} ms-2 px-2"
                                                            t-out="count_per_country.get(None, '0')"
                                                    />
                                                </a>
                                            </t>
                                        </t>
                                    </div>
                                </div>
                                <div
                                        t-attf-class="mt-3 mt-lg-0  col-lg-3 dropdown w-100 w-md-auto me-2 my-1 flex-fill"
                                >
                                    <label class="pb-3">Department</label>
                                    <button
                                            style="border: 1px solid #e5e7eb !important"
                                            type="button"
                                            class="btn text-dark w-100"
                                            data-bs-toggle="dropdown"
                                            id="departmentsDropdown"
                                    >
                                        <div
                                                class="d-flex align-items-center justify-content-between"
                                        >
                                            <div>
                                                <t t-if="department_id" t-out="department_id.name"/>
                                                <t t-elif="is_other_department">Others</t>
                                                <t t-else="">All Departments</t>
                                            </div>

                                            <svg
                                                    width="24"
                                                    height="24"
                                                    viewBox="0 0 24 24"
                                                    fill="none"
                                                    xmlns="http://www.w3.org/2000/svg"
                                            >
                                                <path
                                                        d="M19 9L12 16L5 9"
                                                        stroke="#0A0A0A"
                                                        stroke-width="2"
                                                        stroke-linecap="round"
                                                        stroke-linejoin="round"
                                                />
                                            </svg>
                                        </div>
                                    </button>
                                    <div
                                            class="dropdown-menu w-100 w-md-auto"
                                            aria-labelledby="departmentsDropdown"
                                    >
                                        <a
                                                t-attf-href="/jobs?all_departments=1#{non_department_params}"
                                                t-attf-class="dropdown-item d-flex align-items-center justify-content-between nav-link#{'' if department_id or is_other_department else ' active'}"
                                        >
                                            All Departments
                                            <span
                                                    t-attf-class="badge rounded-pill#{' bg-primary' if department_id or is_other_department else ' bg-light text-primary'} ms-2 px-2"
                                                    t-out="count_per_department.get('all', '0')"
                                            />
                                        </a>
                                        <t t-foreach="departments" t-as="department">
                                            <t t-if="department">
                                                <a
                                                        t-attf-href="/jobs?department_id=#{department.id}#{non_department_params}"
                                                        t-attf-class="dropdown-item d-flex align-items-center justify-content-between nav-link #{' active' if department_id and department_id.id == department.id else ''}"
                                                >
                                                    <t t-out="department.name"/>
                                                    <span
                                                            t-attf-class="badge rounded-pill#{' bg-light text-primary' if department_id and department_id.id == department.id else ' bg-primary'} ms-2 px-2"
                                                            t-out="count_per_department.get(department, '0')"
                                                    />
                                                </a>
                                            </t>
                                            <t t-else="">
                                                <a
                                                        t-attf-href="/jobs?is_other_department=1#{non_department_params}"
                                                        t-attf-class="dropdown-item d-flex align-items-center justify-content-between nav-link #{' active' if is_other_department else ''}"
                                                >
                                                    Others
                                                    <span
                                                            t-attf-class="badge rounded-pill#{' bg-light text-primary' if is_other_department else ' bg-primary'} ms-2 px-2"
                                                            t-out="count_per_department.get(None, '0')"
                                                    />
                                                </a>
                                            </t>
                                        </t>
                                    </div>
                                </div>
                                <!--  -->
                                <div class="col-lg-2">
                                    <button
                                            type="submit"
                                            aria-label="Search"
                                            title="Search"
                                            style="background: white; color: #7f2e8c !important"
                                            class="btn text-center btn-outline-primary d-block w-100 mb-0 mt-4 oe_search_button btn-light"
                                    >
                                        <div class="d-flex gap-3 align-items-center">
                                            <svg
                                                    width="24"
                                                    height="24"
                                                    viewBox="0 0 24 24"
                                                    fill="none"
                                                    xmlns="http://www.w3.org/2000/svg"
                                            >
                                                <path
                                                        d="M21 21L15.8033 15.8033M15.8033 15.8033C17.1605 14.4461 18 12.5711 18 10.5C18 6.35786 14.6421 3 10.5 3C6.35786 3 3 6.35786 3 10.5C3 14.6421 6.35786 18 10.5 18C12.5711 18 14.4461 17.1605 15.8033 15.8033Z"
                                                        stroke="#7F2E8C"
                                                        stroke-width="1.5"
                                                        stroke-linecap="round"
                                                        stroke-linejoin="round"
                                                />
                                            </svg>
                                            <span t-if="search" class="oe_search_found fw-bold">
                                                <small>(<t t-out="search_count or 0"/>found)
                                                </small>
                                            </span>
                                            <span t-else="" class="fw-bold">search</span>
                                        </div>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </form>
                </section>
                <section class="py-lg-5 mb-5">
                    <div class="container">
                        <div class="row">
                            <t t-if="not jobs">
                                <div class="d-flex justify-content-center">
                                    <div
                                            class="alert w-fit px-3 alert-error align-items-center text-center"
                                    >
                                        <strong
                                                class="d-flex align-items-center justify-content-center"
                                        >
                                            <i class="bi bi-search p-3 me-2 d-inline-flex bg-primary rounded-5 text-white"/>
                                            No jobs found.
                                            <a href="/jobs" class="ps-2">reset filters</a>
                                        </strong
                                        >
                                    </div>
                                </div>
                            </t>
                            <t t-else="">
                                <t t-foreach="jobs" t-as="jop">
                                    <div
                                            class="box mt-4 position-relative rounded-5 p-3"
                                            style="background-color: #f9fafb"
                                    >
                                        <p
                                                t-if="not jop.website_published"
                                                class="rounded-3 fw-bold unpublished text-white position-absolute p-2"
                                                style="
                        right: 0;
                        top: -6px;
                        background: #ff0000ab;
                        font-style: italic;
                      "
                                        >
                                            unpublished
                                        </p>
                                        <div class="details">
                                            <p class="fs-5 fw-bold" t-esc="jop.name"/>
                                            <div class="details-jobs d-flex gap-3">
                                                <t t-if="jop.contract_type_id.name">
                                                    <p
                                                            style="font-weight: 500; font-size: 18px"
                                                            t-out="jop.contract_type_id.name"
                                                    />
                                                </t>
                                                <t t-else="">
                                                    <p>undefined</p>
                                                </t>

                                                <p>|</p>
                                                <p style="font-weight: 500; font-size: 18px">
                                                    <t t-esc="jop.experience"/>
                                                    + years
                                                </p>
                                            </div>
                                            <div
                                                    class="date pt-lg-4 d-flex flex-column flex-lg-row justify-content-between align-items-lg-center"
                                            >
                                                <t t-if="jop.date_jobs">
                                                    <time
                                                            style="color: #150e25"
                                                            class="mt-3 mt-lg-0"
                                                            t-esc="jop.date_jobs.strftime('%b %d, %Y')"
                                                    />
                                                </t>
                                                <t t-else="">
                                                    <p style="color: #150e25">undefined</p>
                                                </t>
                                                <a
                                                        t-attf-href="/jobs/#{ slug(jop) }"
                                                        style="background: #7f2e8c"
                                                        class="btn w-fit mt-5 mt-lg-0 text-white fw-bold"
                                                >Apply now
                                                    <span class="d-inline-block"
                                                    >
                                                        <svg
                                                                xmlns="http://www.w3.org/2000/svg"
                                                                width="24"
                                                                height="24"
                                                                viewBox="0 0 24 24"
                                                                fill="none"
                                                        >
                                                            <path
                                                                    d="M4.5 12L19.5 12M19.5 12L12.75 5.25M19.5 12L12.75 18.75"
                                                                    stroke="#F9F5F9"
                                                                    stroke-width="1.5"
                                                                    stroke-linecap="round"
                                                                    stroke-linejoin="round"
                                                            />
                                                        </svg>
                                                    </span>
                                                </a>
                                            </div>
                                        </div>
                                    </div>
                                </t>
                            </t>
                        </div>
                    </div>
                    <t t-call="theme_taqatechno.custom_hide_pager_ul_taqat"/>
                </section>
            </t>
        </xpath>
    </template>
</odoo>
